ÝD
kC:\Users\MICROBYTE COMPUTERS\source\repos\AirlineAssignment\AirLineWebApi\Controllers\AirlinesController.cs
	namespace 	
AirLineWebApi
 
. 
Controllers #
{ 
[		 
Route		 

(		
 
$str		 "
)		" #
]		# $
[

 
ApiController

 
]

 
public 

class 
AirlinesController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
AirlineDbContext )
_context* 2
;2 3
public 
AirlinesController !
(! "
AirlineDbContext" 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Airline3 :
>: ;
>; <
>< =
GetAirlines> I
(I J
)J K
{ 	
if 
( 
_context 
. 
Airlines !
==" $
null% )
)) *
{ 
return 
NotFound 
(  
)  !
;! "
} 
else 
{ 
var 
list 
= 
await  
_context! )
.) *
Airlines* 2
.2 3
ToListAsync3 >
(> ?
)? @
;@ A
var 
json 
= 
JsonConvert %
.% &
SerializeObject& 5
(5 6
list6 :
): ;
;; <
return 
Ok 
( 
json 
) 
;  
}   
}!! 	
[## 	
HttpGet##	 
(## 
$str## 
)## 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
ActionResult$$ &
<$$& '
Airline$$' .
>$$. /
>$$/ 0
GetAirLineById$$1 ?
($$? @
int$$@ C
id$$D F
)$$F G
{%% 	
if&&
 
(&& 
_context&& 
.&& 
Airlines&& 
==&&  "
null&&# '
)&&' (
{''
 
return(( 
NotFound(( 
((( 
)(( 
;((  
}))
 
var** 
data** 
=** 
await** 
_context** %
.**% &
Airlines**& .
.**. /
FirstOrDefaultAsync**/ B
(**B C
a**C D
=>**E G
a**H I
.**I J
Id**J L
==**M O
id**P R
)**R S
;**S T
var++ 
json++ 
=++ 
JsonConvert++ "
.++" #
SerializeObject++# 2
(++2 3
data++3 7
)++7 8
;++8 9
if-- 
(-- 
data-- 
==-- 
null-- 
)-- 
{.. 
return// 
NotFound// 
(//  
)//  !
;//! "
}00 
return11 
Ok11 
(11 
json11 
)11 
;11 
}22 	
[44 	
HttpGet44	 
(44 
$str44 
)44 
]44 
public55 
async55 
Task55 
<55 
ActionResult55 &
<55& '
Airline55' .
>55. /
>55/ 0
GetAirlineByName551 A
(55A B
string55B H
Name55I M
)55M N
{66 	
if77 
(77 
_context77 
.77 
Airlines77 !
==77" $
null77% )
)77) *
{88 
return99 
NotFound99 
(99  
)99  !
;99! "
}:: 
var;; 
data;; 
=;; 
await;; 
_context;; %
.;;% &
Airlines;;& .
.;;. /
FirstOrDefaultAsync;;/ B
(;;B C
a;;C D
=>;;E G
a;;H I
.;;I J
Name;;J N
==;;O Q
Name;;R V
);;V W
;;;W X
var<< 
json<< 
=<< 
JsonConvert<< "
.<<" #
SerializeObject<<# 2
(<<2 3
data<<3 7
)<<7 8
;<<8 9
if>> 
(>> 
data>> 
==>> 
null>> 
)>> 
{?? 
return@@ 
NotFound@@ 
(@@  
)@@  !
;@@! "
}AA 
returnBB 
OkBB 
(BB 
jsonBB 
)BB 
;BB 
}CC 	
[GG 	
HttpPutGG	 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
UpdateAirLinesHH) 7
(HH7 8
AirlineHH8 ?
airlineHH@ G
)HHG H
{II 	
ifJJ 
(JJ 
_contextJJ 
.JJ 
AirlinesJJ !
==JJ" $
nullJJ% )
)JJ) *
{KK 
returnLL 
NotFoundLL 
(LL  
)LL  !
;LL! "
}MM 
_contextNN 
.NN 
AirlinesNN 
.NN 
UpdateNN $
(NN$ %
airlineNN% ,
)NN, -
;NN- .
tryOO 
{PP 
awaitQQ 
_contextQQ 
.QQ 
SaveChangesAsyncQQ /
(QQ/ 0
)QQ0 1
;QQ1 2
returnRR 
OkRR 
(RR 
)RR 
;RR 
}SS 
catchTT 
(TT (
DbUpdateConcurrencyExceptionTT /
)TT/ 0
{UU 
throwVV 
;VV 
}WW 
}XX 	
[ZZ 	
HttpPostZZ	 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
ActionResult[[ &
<[[& '
Airline[[' .
>[[. /
>[[/ 0
CreateAirLines[[1 ?
([[? @
Airline[[@ G
airlineModel[[H T
)[[T U
{\\ 	
if]]
 
(]] 
_context]] 
.]] 
Airlines]] 
==]]  "
null]]# '
)]]' (
{^^
 
return__ 
Problem__ 
(__ 
$str__ O
)__O P
;__P Q
}``
 
ifaa 
(aa 
airlineModelaa 
!=aa 
nullaa  $
)aa$ %
{bb 
_contextcc 
.cc 
Airlinescc !
.cc! "
Addcc" %
(cc% &
airlineModelcc& 2
)cc2 3
;cc3 4
awaitdd 
_contextdd 
.dd 
SaveChangesAsyncdd /
(dd/ 0
)dd0 1
;dd1 2
returnee 
Okee 
(ee 
)ee 
;ee 
}ff 
elsegg 
returnhh 

BadRequesthh !
(hh! "
)hh" #
;hh# $
}ii 	
[kk 	

HttpDeletekk	 
]kk 
publicll 
asyncll 
Taskll 
<ll 
IActionResultll '
>ll' (
DeleteAirlinesll) 7
(ll7 8
intll8 ;
idll< >
)ll> ?
{mm 	
ifnn 
(nn 
_contextnn 
.nn 
Airlinesnn !
==nn" $
nullnn% )
)nn) *
{oo 
returnpp 
NotFoundpp 
(pp  
)pp  !
;pp! "
}qq 
varrr 
airlinerr 
=rr 
awaitrr 
_contextrr  (
.rr( )
Airlinesrr) 1
.rr1 2
FirstOrDefaultAsyncrr2 E
(rrE F
arrF G
=>rrH J
arrK L
.rrL M
IdrrM O
==rrP R
idrrS U
)rrU V
;rrV W
ifss 
(ss 
airliness 
==ss 
nullss 
)ss  
{tt 
returnuu 
NotFounduu 
(uu  
)uu  !
;uu! "
}vv 
_contextww 
.ww 
Airlinesww 
.ww 
Removeww $
(ww$ %
airlineww% ,
)ww, -
;ww- .
awaitxx 
_contextxx 
.xx 
SaveChangesAsyncxx +
(xx+ ,
)xx, -
;xx- .
returnyy 
Okyy 
(yy 
)yy 
;yy 
}zz 	
}{{ 
}|| Ð
TC:\Users\MICROBYTE COMPUTERS\source\repos\AirlineAssignment\AirLineWebApi\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
< 
AirlineDbContext .
>. /
(/ 0
options0 7
=>8 :
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC O
)O P
??Q S
throwT Y
newZ ]%
InvalidOperationException^ w
(w x
$str	x £
)
£ ¤
)
¤ ¥
)
¥ ¦
;
¦ §
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{ 
options 
. 
AddDefaultPolicy 
( 
builder $
=>% '
{ 
builder 
. 
WithOrigins 
( 
$str 4
)4 5
. 	
WithHeaders	 
( 
$str #
)# $
;$ %
} 
) 
; 
options 
. 
	AddPolicy 
( 
$str &
,& '
builder( /
=>0 2
{ 
builder 
. 
WithOrigins 
( 
$str 4
)4 5
. 
WithHeaders 
( 
$str '
)' (
;( )
} 
) 
; 
} 
) 
; 
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var!! 
app!! 
=!! 	
builder!!
 
.!! 
Build!! 
(!! 
)!! 
;!! 
if$$ 
($$ 
app$$ 
.$$ 
Environment$$ 
.$$ 
IsDevelopment$$ !
($$! "
)$$" #
)$$# $
{%% 
app&& 
.&& 

UseSwagger&& 
(&& 
)&& 
;&& 
app'' 
.'' 
UseSwaggerUI'' 
('' 
)'' 
;'' 
}(( 
app** 
.** 
UseHttpsRedirection** 
(** 
)** 
;** 
app,, 
.,, 
UseAuthorization,, 
(,, 
),, 
;,, 
app-- 
.-- 
UseCors-- 
(-- 
)-- 
;-- 
app// 
.// 
MapControllers// 
(// 
)// 
;// 
app11 
.11 
Run11 
(11 
)11 	
;11	 
